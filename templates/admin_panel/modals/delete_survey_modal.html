{# Modal for survey deletion confirmation #}
<div id="delete-survey-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4">
        <div class="p-6">
            <div class="text-center mb-6">
                <div class="text-5xl text-red-600 mb-4">
                    <i class="fas fa-trash-alt"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-900">Delete Survey</h3>
            </div>
            
            <div class="bg-red-50 p-4 rounded-xl mb-6 border border-red-200">
                <p class="text-sm text-gray-700">
                    <strong>Survey:</strong> <span id="modal-survey-name"></span><br/>
                    <strong>Responses:</strong> <span id="modal-survey-responses">0</span>
                </p>
            </div>
            
            <div class="bg-yellow-50 p-4 rounded-xl mb-6 border border-yellow-200">
                <p class="text-xs text-yellow-800">
                    <i class="fas fa-info-circle mr-2"></i>
                    This survey will be moved to trash and can be restored within 30 days.
                </p>
            </div>
            
            <div class="flex space-x-3">
                <button onclick="closeDeleteModal()" class="flex-1 px-4 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg hover:bg-gray-400 transition">
                    Cancel
                </button>
                <form id="delete-form" method="post" class="flex-1">
                    {% csrf_token %}
                    <button type="submit" class="w-full px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition">
                        Move to Trash
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function openDeleteSurveyModal(surveyId, surveyName, responseCount) {
    document.getElementById('modal-survey-name').textContent = surveyName;
    document.getElementById('modal-survey-responses').textContent = responseCount;
    document.getElementById('delete-form').action = `/admin-panel/surveys/${surveyId}/delete/`;
    document.getElementById('delete-survey-modal').classList.remove('hidden');
}

function closeDeleteModal() {
    document.getElementById('delete-survey-modal').classList.add('hidden');
}

// Close modal when clicking outside
document.getElementById('delete-survey-modal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeDeleteModal();
    }
});
</script>
