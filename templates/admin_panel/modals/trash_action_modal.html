{# Modal for trash item operations #}
<div id="trash-action-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4">
        <div class="p-6">
            <div class="text-center mb-6">
                <div id="modal-icon" class="text-5xl mb-4">
                    <i class="fas fa-undo"></i>
                </div>
                <h3 id="modal-title" class="text-2xl font-bold text-gray-900">Restore Item</h3>
            </div>
            
            <div class="bg-blue-50 p-4 rounded-xl mb-6 border border-blue-200">
                <p class="text-sm text-gray-700">
                    <strong>Item:</strong> <span id="modal-item-name"></span><br/>
                    <strong>Type:</strong> <span id="modal-item-type"></span><br/>
                    <strong>Deleted:</strong> <span id="modal-item-date"></span>
                </p>
            </div>
            
            <div id="modal-warning" class="bg-yellow-50 p-4 rounded-xl mb-6 border border-yellow-200 hidden">
                <p class="text-xs text-yellow-800">
                    <i class="fas fa-exclamation-triangle mr-2"></i>
                    <span id="warning-text">Warning message</span>
                </p>
            </div>
            
            <div class="flex space-x-3">
                <button onclick="closeTrashModal()" class="flex-1 px-4 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg hover:bg-gray-400 transition">
                    Cancel
                </button>
                <form id="trash-action-form" method="post" class="flex-1">
                    {% csrf_token %}
                    <button id="modal-action-btn" type="submit" class="w-full px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition">
                        Restore
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function openTrashActionModal(action, itemId, itemName, itemType, itemDate) {
    const modal = document.getElementById('trash-action-modal');
    const form = document.getElementById('trash-action-form');
    const btn = document.getElementById('modal-action-btn');
    const icon = document.getElementById('modal-icon');
    const title = document.getElementById('modal-title');
    const warning = document.getElementById('modal-warning');
    
    document.getElementById('modal-item-name').textContent = itemName;
    document.getElementById('modal-item-type').textContent = itemType;
    document.getElementById('modal-item-date').textContent = itemDate;
    
    if (action === 'restore') {
        form.action = `/admin-panel/trash/restore/${itemId}/`;
        title.textContent = 'Restore Item';
        icon.innerHTML = '<i class="fas fa-undo text-green-600"></i>';
        btn.textContent = 'Restore';
        btn.className = 'w-full px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition';
        warning.classList.add('hidden');
    } else if (action === 'delete') {
        form.action = `/admin-panel/trash/delete/${itemId}/`;
        title.textContent = 'Delete Permanently';
        icon.innerHTML = '<i class="fas fa-trash-alt text-red-600"></i>';
        btn.textContent = 'Delete Permanently';
        btn.className = 'w-full px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition';
        warning.classList.remove('hidden');
        document.getElementById('warning-text').textContent = 'This item will be permanently deleted and cannot be recovered.';
    }
    
    modal.classList.remove('hidden');
}

function closeTrashModal() {
    document.getElementById('trash-action-modal').classList.add('hidden');
}

// Close modal when clicking outside
document.getElementById('trash-action-modal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeTrashModal();
    }
});

function openBulkTrashActionModal(action) {
    const modal = document.getElementById('trash-action-modal');
    const form = document.getElementById('trash-action-form');
    const btn = document.getElementById('modal-action-btn');
    const icon = document.getElementById('modal-icon');
    const title = document.getElementById('modal-title');
    const warning = document.getElementById('modal-warning');
    const itemInfo = document.querySelector('.bg-blue-50');
    
    itemInfo.innerHTML = '<p class="text-sm text-gray-700"><strong>Action:</strong> This will affect all items in trash</p>';
    
    if (action === 'restore-all') {
        form.action = '/admin-panel/trash/restore-all/';
        title.textContent = 'Restore All Items';
        icon.innerHTML = '<i class="fas fa-undo text-green-600"></i>';
        btn.textContent = 'Restore All';
        btn.className = 'w-full px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition';
        warning.classList.add('hidden');
    } else if (action === 'delete-all') {
        form.action = '/admin-panel/trash/delete-all/';
        title.textContent = 'Delete All Permanently';
        icon.innerHTML = '<i class="fas fa-trash-alt text-red-600"></i>';
        btn.textContent = 'Delete All Permanently';
        btn.className = 'w-full px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition';
        warning.classList.remove('hidden');
        document.getElementById('warning-text').textContent = 'All items in trash will be permanently deleted and cannot be recovered.';
    }
    
    modal.classList.remove('hidden');
}
</script>
